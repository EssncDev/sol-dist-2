{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encode = exports.patch = void 0;\nconst utils_1 = require(\"./utils\");\nconst transform = (fieldType, value) => {\n  if (fieldType === 'bytes') {\n    if (typeof value === 'string' && !value) return value;\n    return Buffer.from(value, 'hex');\n  }\n  if (typeof value === 'number' && !Number.isSafeInteger(value)) {\n    throw new RangeError('field value is not within safe integer range');\n  }\n  return value;\n};\nfunction patch(Message, payload) {\n  const patched = {};\n  if (!Message.fields) {\n    return patched;\n  }\n  Object.keys(Message.fields).forEach(key => {\n    const field = Message.fields[key];\n    const value = payload[key];\n    if (typeof value === 'undefined') {\n      return;\n    }\n    if ((0, utils_1.isPrimitiveField)(field.type)) {\n      if (field.repeated) {\n        patched[key] = value.map(v => transform(field.type, v));\n      } else {\n        patched[key] = transform(field.type, value);\n      }\n      return;\n    }\n    if (field.repeated) {\n      const RefMessage = Message.lookupTypeOrEnum(field.type);\n      patched[key] = value.map(v => patch(RefMessage, v));\n    } else if (typeof value === 'object' && value !== null) {\n      const RefMessage = Message.lookupType(field.type);\n      patched[key] = patch(RefMessage, value);\n    } else if (typeof value === 'number') {\n      const RefMessage = Message.lookupEnum(field.type);\n      patched[key] = RefMessage.values[value];\n    } else {\n      patched[key] = value;\n    }\n  });\n  return patched;\n}\nexports.patch = patch;\nconst encode = (Message, data) => {\n  const payload = patch(Message, data);\n  const message = Message.fromObject(payload);\n  const bytes = Message.encode(message).finish();\n  return Buffer.from(bytes);\n};\nexports.encode = encode;","map":{"version":3,"names":["Object","defineProperty","exports","value","encode","patch","utils_1","require","transform","fieldType","Buffer","from","Number","isSafeInteger","RangeError","Message","payload","patched","fields","keys","forEach","key","field","isPrimitiveField","type","repeated","map","v","RefMessage","lookupTypeOrEnum","lookupType","lookupEnum","values","data","message","fromObject","bytes","finish"],"sources":["/Users/Devdev/Documents/GitHub/Cycle_Codebase/cycle-skelly/node_modules/@trezor/protobuf/lib/encode.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encode = exports.patch = void 0;\nconst utils_1 = require(\"./utils\");\nconst transform = (fieldType, value) => {\n    if (fieldType === 'bytes') {\n        if (typeof value === 'string' && !value)\n            return value;\n        return Buffer.from(value, 'hex');\n    }\n    if (typeof value === 'number' && !Number.isSafeInteger(value)) {\n        throw new RangeError('field value is not within safe integer range');\n    }\n    return value;\n};\nfunction patch(Message, payload) {\n    const patched = {};\n    if (!Message.fields) {\n        return patched;\n    }\n    Object.keys(Message.fields).forEach(key => {\n        const field = Message.fields[key];\n        const value = payload[key];\n        if (typeof value === 'undefined') {\n            return;\n        }\n        if ((0, utils_1.isPrimitiveField)(field.type)) {\n            if (field.repeated) {\n                patched[key] = value.map((v) => transform(field.type, v));\n            }\n            else {\n                patched[key] = transform(field.type, value);\n            }\n            return;\n        }\n        if (field.repeated) {\n            const RefMessage = Message.lookupTypeOrEnum(field.type);\n            patched[key] = value.map((v) => patch(RefMessage, v));\n        }\n        else if (typeof value === 'object' && value !== null) {\n            const RefMessage = Message.lookupType(field.type);\n            patched[key] = patch(RefMessage, value);\n        }\n        else if (typeof value === 'number') {\n            const RefMessage = Message.lookupEnum(field.type);\n            patched[key] = RefMessage.values[value];\n        }\n        else {\n            patched[key] = value;\n        }\n    });\n    return patched;\n}\nexports.patch = patch;\nconst encode = (Message, data) => {\n    const payload = patch(Message, data);\n    const message = Message.fromObject(payload);\n    const bytes = Message.encode(message).finish();\n    return Buffer.from(bytes);\n};\nexports.encode = encode;\n//# sourceMappingURL=encode.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}